<div class="container-fluid mt-5">
  <div class="row">
    <!-- Menú Lateral -->
    <div class="col-md-3">
      <mat-icon (click)="secondOportunityLogout()">logout</mat-icon>
      <div class="list-group">
        
        <!-- scrollTo sirve para que se pueda desplazar hasta las secciones -->
        <a (click)="scrollTo('vista-previa')" class="list-group-item list-group-item-action">Vista Previa</a>
        <a (click)="scrollTo('cambiar-horario')" class="list-group-item list-group-item-action">Cambiar horario y Descripcion</a>
        <a (click)="scrollTo('productos')" class="list-group-item list-group-item-action">Gestión De productos</a>
        <!-- Añade más enlaces según tus necesidades -->
      </div>
      
    </div>

    <!-- Contenido Principal -->
    <div class="col-md-9">
      <div id="vista-previa" class="card shadow mb-5">
        <div class="card-body">
          <h4>Vista Previa</h4>
          <div class="row gx-4 gx-lg-5 align-items-center">
            <!-- Imagen de la tienda -->
            <div class="col-md-6">
                <img class="card-img-top mb-5 mb-md-0 rounded shadow-lg" src="{{tienda.foto}}" alt="Imagen Tienda" />
            </div>
            <div class="col-md-6">
                <div class="small mb-1 text-muted">{{tienda.Tipo}}</div>

                <div class="d-flex align-items-center mb-3">
                    <h1 class="display-5 fw-bolder mb-0">{{tienda.Nombre}}</h1>
                    <!-- Botón de favoritos -->
                    <div class="ms-3">
                        <mat-icon>favorite_icon</mat-icon>
                    </div>
                </div>



                <!-- Horarios -->
                <p class="lead mb-4">
                    {{tienda.Horario_Apertura}} - {{tienda.Horario_Cierre}}
                </p>

                <!-- Botón para ver productos -->
                <div class="d-flex justify-content-start">
                    <button class="btn btn-success" type="button" [routerLink]="['/catalogo/' + tienda.ID_Establecimiento + '/' + 'productos']">Ver Productos</button>
                </div>

                <!-- Valoración de la tienda -->
                <div class="mt-4">
                    <div class="small mb-1">Media de valoración:</div>
                    <div class="strong">
                        {{tienda.Calificacion_Promedio}}/5
                        <span class="material-icons llena">
                            star_rate
                        </span>
                    </div>
                </div>
            </div>
        </div>
        </div>
      </div>


      <div class="row">
        <div class="col-md-6">
          <div class="card shadow mb-5" id="cambiar-horario">
            <div class="card-body">
              <h4>Cambiar Horario</h4>
              <form (submit)="onSubmitHorario()">
                <div class="mb-3">
                  <label for="horaApertura" class="form-label">Hora de Apertura</label>
                  <input type="time" class="form-control" id="horaApertura" [(ngModel)]="Horario_Apertura" name="horaApertura">
                </div>
                <div class="mb-3">
                  <label for="horaCierre" class="form-label">Hora de Cierre</label>
                  <input type="time" class="form-control" id="horaCierre" [(ngModel)]="Horario_Cierre" name="horaCierre">
                </div>
                <div class="d-flex">
                  <button type="submit" class="btn btn-primary me-2">Guardar Cambios</button>
                </div>
              </form>
            </div>
          </div>
          
        </div>
        <div class="col-md-6">
          <div class="card shadow mb-5">
            <h4>Cambiar Descripcion</h4>
          </div>
        </div>
      </div>

      <!-- <div class="col-md-9"> -->
        <div class="card shadow productos mb-5" id="productos">
          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3 justify-content-center">
            <!-- Mostrar mensaje si no hay productos -->
            @if(productos.length == 0) {
              <div class="text-center py-5">
                <h3 class="text-muted">No hay productos disponibles</h3>
                <p class="text-muted">Agrega un producto para empezar</p>
              </div>
            } @else {
              @for(producto of productos; track productos) {
                <div class="col">
                  <div class="card custom-card shadow-sm m-2">
                    <img src="{{producto.Foto}}" alt="{{producto.Nombre}}" class="card-img-top img-fluid rounded-top" style="height: 180px; object-fit: cover;">
                    <div class="card-body d-flex flex-column">
                      <h5 class="product-name card-title text-truncate">{{producto.Nombre}}</h5>
                      <p class="price text-success fw-bold">{{ producto.Precio | currency : "EUR" }}</p>
                      <p class="location text-muted small">{{producto.Descripcion}}</p>
                      <div class="mt-auto d-flex justify-content-between">
                        <button class="btn btn-primary btn-sm">Editar</button>
                        <button class="btn btn-danger btn-sm" (click)="deleteProduct(producto.ID_Producto)">Eliminar</button>
                      </div>
                    </div>
                  </div>
                </div>
              }
            }
          </div>
        </div>
        <div class="card shadow mb-4">
          <div class="card-body">
            <h4 class="mb-4">Añadir Nuevo Producto</h4>
            <form>
              <div class="mb-3">
                <label for="nombreProducto" class="form-label">Nombre del Producto</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="nombreProducto" 

                  name="nombreProducto" 
                  placeholder="Ingresa el nombre del producto" 
                  required>
              </div>
              <div class="mb-3">
                <label for="precioProducto" class="form-label">Precio</label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="precioProducto" 

                  name="precioProducto" 
                  placeholder="Ingresa el precio del producto" 
                  min="0" 
                  step="0.01" 
                  required>
              </div>
              <div class="mb-3">
                <label for="descripcionProducto" class="form-label">Descripción</label>
                <textarea 
                  class="form-control" 
                  id="descripcionProducto" 
                  
                  name="descripcionProducto" 
                  rows="3" 
                  placeholder="Describe el producto" 
                  required></textarea>
              </div>
              <div class="mb-3">
                <label for="imagenProducto" class="form-label">Imagen del Producto</label>
                <input 
                  type="file" 
                  class="form-control" 
                  id="imagenProducto" 
                  (change)="onFileChange($event)" 
                  accept="image/*" 
                  required>
              </div>
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary">Guardar Producto</button>
              </div>
            </form>
          </div>
        </div>
        
        
  </div>
</div>
